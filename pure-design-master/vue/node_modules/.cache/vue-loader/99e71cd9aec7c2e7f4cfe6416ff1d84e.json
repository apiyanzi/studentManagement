{"remainingRequest":"E:\\ieDownloads\\pure-design-master\\pure-design-master\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ieDownloads\\pure-design-master\\pure-design-master\\vue\\src\\views\\Menu.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\ieDownloads\\pure-design-master\\pure-design-master\\vue\\src\\views\\Menu.vue","mtime":1654344555765},{"path":"E:\\ieDownloads\\pure-design-master\\pure-design-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654139112174},{"path":"E:\\ieDownloads\\pure-design-master\\pure-design-master\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1654139112747},{"path":"E:\\ieDownloads\\pure-design-master\\pure-design-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654139112174},{"path":"E:\\ieDownloads\\pure-design-master\\pure-design-master\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1654139110307}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHNlcnZlcklwIH0gZnJvbSAnLi4vLi4vcHVibGljL2NvbmZpZyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ01lbnUnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YWJsZURhdGE6IFtdLAogICAgICB0b3RhbDogMCwKICAgICAgcGFnZU51bTogMSwKICAgICAgcGFnZVNpemU6IDEwLAogICAgICBuYW1lOiAnJywKICAgICAgZm9ybToge30sCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgbXVsdGlwbGVTZWxlY3Rpb246IFtdLAogICAgICBvcHRpb25zOiBbXSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5sb2FkKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkKCkgewogICAgICB0aGlzLnJlcXVlc3QKICAgICAgICAuZ2V0KCcvbWVudScsIHsKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgICB9LAogICAgICAgIH0pCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmRhdGE7CiAgICAgICAgfSk7CgogICAgICAvLyDor7fmsYLlm77moIfnmoTmlbDmja4KICAgICAgdGhpcy5yZXF1ZXN0LmdldCgnL21lbnUvaWNvbnMnKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5vcHRpb25zID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmUoKSB7CiAgICAgIHRoaXMucmVxdWVzdC5wb3N0KCcvbWVudScsIHRoaXMuZm9ybSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzIwMCcpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+d5a2Y5oiQ5YqfJyk7CiAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmxvYWQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5L+d5a2Y5aSx6LSlJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVBZGQocGlkKSB7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLmZvcm0gPSB7fTsKICAgICAgaWYgKHBpZCkgewogICAgICAgIHRoaXMuZm9ybS5waWQgPSBwaWQ7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVFZGl0KHJvdykgewogICAgICB0aGlzLmZvcm0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJvdykpOwogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBkZWwoaWQpIHsKICAgICAgdGhpcy5yZXF1ZXN0LmRlbGV0ZSgnL21lbnUvJyArIGlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMjAwJykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTmiJDlip8nKTsKICAgICAgICAgIHRoaXMubG9hZCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfliKDpmaTlpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSh2YWwpIHsKICAgICAgY29uc29sZS5sb2codmFsKTsKICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbiA9IHZhbDsKICAgIH0sCiAgICBkZWxCYXRjaCgpIHsKICAgICAgbGV0IGlkcyA9IHRoaXMubXVsdGlwbGVTZWxlY3Rpb24ubWFwKHYgPT4gdi5pZCk7IC8vIFt7fSwge30sIHt9XSA9PiBbMSwyLDNdCiAgICAgIHRoaXMucmVxdWVzdC5wb3N0KCcvbWVudS9kZWwvYmF0Y2gnLCBpZHMpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcyMDAnKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aJuemHj+WIoOmZpOaIkOWKnycpOwogICAgICAgICAgdGhpcy5sb2FkKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aJuemHj+WIoOmZpOWksei0pScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMubmFtZSA9ICcnOwogICAgICB0aGlzLmxvYWQoKTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKHBhZ2VTaXplKSB7CiAgICAgIGNvbnNvbGUubG9nKHBhZ2VTaXplKTsKICAgICAgdGhpcy5wYWdlU2l6ZSA9IHBhZ2VTaXplOwogICAgICB0aGlzLmxvYWQoKTsKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHBhZ2VOdW0pIHsKICAgICAgY29uc29sZS5sb2cocGFnZU51bSk7CiAgICAgIHRoaXMucGFnZU51bSA9IHBhZ2VOdW07CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwKICAgIGV4cCgpIHsKICAgICAgd2luZG93Lm9wZW4oYGh0dHA6Ly8ke3NlcnZlcklwfTo5MDkwL3JvbGUvZXhwb3J0YCk7CiAgICB9LAogICAgaGFuZGxlRXhjZWxJbXBvcnRTdWNjZXNzKCkgewogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WvvOWFpeaIkOWKnycpOwogICAgICB0aGlzLmxvYWQoKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Menu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Menu.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <!-- 菜单 -->\n    <div style=\"margin: 10px 0\">\n      <el-input\n        style=\"width: 200px\"\n        placeholder=\"请输入名称\"\n        suffix-icon=\"el-icon-search\"\n        v-model=\"name\"\n      ></el-input>\n      <!--      <el-input style=\"width: 200px\" placeholder=\"请输入邮箱\" suffix-icon=\"el-icon-message\" class=\"ml-5\" v-model=\"email\"></el-input>-->\n      <!--      <el-input style=\"width: 200px\" placeholder=\"请输入地址\" suffix-icon=\"el-icon-position\" class=\"ml-5\" v-model=\"address\"></el-input>-->\n      <el-button class=\"ml-5\" type=\"primary\" @click=\"load\">搜索</el-button>\n      <el-button type=\"warning\" @click=\"reset\">重置</el-button>\n    </div>\n\n    <div style=\"margin: 10px 0\">\n      <el-button type=\"primary\" @click=\"handleAdd(null)\">\n        新增\n        <i class=\"el-icon-circle-plus-outline\"></i>\n      </el-button>\n      <el-popconfirm\n        class=\"ml-5\"\n        confirm-button-text=\"确定\"\n        cancel-button-text=\"我再想想\"\n        icon=\"el-icon-info\"\n        icon-color=\"red\"\n        title=\"您确定批量删除这些数据吗？\"\n        @confirm=\"delBatch\"\n      >\n        <el-button type=\"danger\" slot=\"reference\">\n          批量删除\n          <i class=\"el-icon-remove-outline\"></i>\n        </el-button>\n      </el-popconfirm>\n    </div>\n\n    <el-table\n      :data=\"tableData\"\n      border\n      stripe\n      :header-cell-class-name=\"'headerBg'\"\n      row-key=\"id\"\n      default-expand-all\n      @selection-change=\"handleSelectionChange\"\n    >\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n      <el-table-column prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\n      <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\n      <el-table-column prop=\"path\" label=\"路径\"></el-table-column>\n      <el-table-column prop=\"pagePath\" label=\"页面路径\"></el-table-column>\n      <el-table-column\n        label=\"图标\"\n        class-name=\"fontSize18\"\n        align=\"center\"\n        label-class-name=\"fontSize12\"\n      >\n        <template slot-scope=\"scope\">\n          <span :class=\"scope.row.icon\" />\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"description\" label=\"描述\"></el-table-column>\n      <el-table-column prop=\"sortNum\" label=\"顺序\"></el-table-column>\n      <el-table-column label=\"操作\" width=\"300\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"primary\"\n            @click=\"handleAdd(scope.row.id)\"\n            v-if=\"!scope.row.pid && !scope.row.path\"\n          >\n            新增子菜单\n            <i class=\"el-icon-plus\"></i>\n          </el-button>\n          <el-button type=\"success\" @click=\"handleEdit(scope.row)\">\n            编辑\n            <i class=\"el-icon-edit\"></i>\n          </el-button>\n          <el-popconfirm\n            class=\"ml-5\"\n            confirm-button-text=\"确定\"\n            cancel-button-text=\"我再想想\"\n            icon=\"el-icon-info\"\n            icon-color=\"red\"\n            title=\"您确定删除吗？\"\n            @confirm=\"del(scope.row.id)\"\n          >\n            <el-button type=\"danger\" slot=\"reference\">\n              删除\n              <i class=\"el-icon-remove-outline\"></i>\n            </el-button>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog title=\"菜单信息\" :visible.sync=\"dialogFormVisible\" width=\"30%\">\n      <el-form label-width=\"80px\" size=\"small\">\n        <el-form-item label=\"名称\">\n          <el-input v-model=\"form.name\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"路径\">\n          <el-input v-model=\"form.path\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"页面路径\">\n          <el-input v-model=\"form.pagePath\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"图标\">\n          <el-select clearable v-model=\"form.icon\" placeholder=\"请选择\" style=\"width: 100%\">\n            <el-option\n              v-for=\"item in options\"\n              :key=\"item.name\"\n              :label=\"item.name\"\n              :value=\"item.value\"\n            >\n              <i :class=\"item.value\" />\n              {{ item.name }}\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"顺序\">\n          <el-input v-model=\"form.sortNum\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"描述\">\n          <el-input v-model=\"form.description\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { serverIp } from '../../public/config';\n\nexport default {\n  name: 'Menu',\n  data() {\n    return {\n      tableData: [],\n      total: 0,\n      pageNum: 1,\n      pageSize: 10,\n      name: '',\n      form: {},\n      dialogFormVisible: false,\n      multipleSelection: [],\n      options: [],\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      this.request\n        .get('/menu', {\n          params: {\n            name: this.name,\n          },\n        })\n        .then(res => {\n          this.tableData = res.data;\n        });\n\n      // 请求图标的数据\n      this.request.get('/menu/icons').then(res => {\n        this.options = res.data;\n      });\n    },\n    save() {\n      this.request.post('/menu', this.form).then(res => {\n        if (res.code === '200') {\n          this.$message.success('保存成功');\n          this.dialogFormVisible = false;\n          this.load();\n        } else {\n          this.$message.error('保存失败');\n        }\n      });\n    },\n    handleAdd(pid) {\n      this.dialogFormVisible = true;\n      this.form = {};\n      if (pid) {\n        this.form.pid = pid;\n      }\n    },\n    handleEdit(row) {\n      this.form = JSON.parse(JSON.stringify(row));\n      this.dialogFormVisible = true;\n    },\n    del(id) {\n      this.request.delete('/menu/' + id).then(res => {\n        if (res.code === '200') {\n          this.$message.success('删除成功');\n          this.load();\n        } else {\n          this.$message.error('删除失败');\n        }\n      });\n    },\n    handleSelectionChange(val) {\n      console.log(val);\n      this.multipleSelection = val;\n    },\n    delBatch() {\n      let ids = this.multipleSelection.map(v => v.id); // [{}, {}, {}] => [1,2,3]\n      this.request.post('/menu/del/batch', ids).then(res => {\n        if (res.code === '200') {\n          this.$message.success('批量删除成功');\n          this.load();\n        } else {\n          this.$message.error('批量删除失败');\n        }\n      });\n    },\n    reset() {\n      this.name = '';\n      this.load();\n    },\n    handleSizeChange(pageSize) {\n      console.log(pageSize);\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      console.log(pageNum);\n      this.pageNum = pageNum;\n      this.load();\n    },\n    exp() {\n      window.open(`http://${serverIp}:9090/role/export`);\n    },\n    handleExcelImportSuccess() {\n      this.$message.success('导入成功');\n      this.load();\n    },\n  },\n};\n</script>\n\n<style>\n.headerBg {\n  background: #eee !important;\n}\n.fontSize18 {\n  font-size: 18px;\n}\n.fontSize12 {\n  font-size: 12px;\n}\n</style>\n"]}]}