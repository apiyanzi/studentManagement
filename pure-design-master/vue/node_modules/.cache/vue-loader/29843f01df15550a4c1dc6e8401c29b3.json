{"remainingRequest":"E:\\ieDownloads\\pure-design-master\\pure-design-master\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ieDownloads\\pure-design-master\\pure-design-master\\vue\\src\\views\\User.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"E:\\ieDownloads\\pure-design-master\\pure-design-master\\vue\\src\\views\\User.vue","mtime":1654344237118},{"path":"E:\\ieDownloads\\pure-design-master\\pure-design-master\\vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1654139112226},{"path":"E:\\ieDownloads\\pure-design-master\\pure-design-master\\vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1654139110584},{"path":"E:\\ieDownloads\\pure-design-master\\pure-design-master\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1654139111917},{"path":"E:\\ieDownloads\\pure-design-master\\pure-design-master\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1654139112174},{"path":"E:\\ieDownloads\\pure-design-master\\pure-design-master\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1654139110307}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5oZWFkZXJCZyB7CiAgYmFja2dyb3VuZDogI2VlZSAhaW1wb3J0YW50Owp9Cg=="},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4TA;AACA;AACA","file":"User.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <!-- 用户管理 -->\n    <div style=\"margin: 10px 0\">\n      <el-input\n        style=\"width: 200px\"\n        placeholder=\"请输入名称\"\n        suffix-icon=\"el-icon-search\"\n        v-model=\"username\"\n      ></el-input>\n      <el-input\n        style=\"width: 200px\"\n        placeholder=\"请输入邮箱\"\n        suffix-icon=\"el-icon-message\"\n        class=\"ml-5\"\n        v-model=\"email\"\n      ></el-input>\n      <el-input\n        style=\"width: 200px\"\n        placeholder=\"请输入地址\"\n        suffix-icon=\"el-icon-position\"\n        class=\"ml-5\"\n        v-model=\"address\"\n      ></el-input>\n      <el-button class=\"ml-5\" type=\"primary\" @click=\"load\">搜索</el-button>\n      <el-button type=\"warning\" @click=\"reset\">重置</el-button>\n    </div>\n\n    <div style=\"margin: 10px 0\">\n      <el-button type=\"primary\" @click=\"handleAdd\">\n        新增\n        <i class=\"el-icon-circle-plus-outline\"></i>\n      </el-button>\n      <el-popconfirm\n        class=\"ml-5\"\n        confirm-button-text=\"确定\"\n        cancel-button-text=\"我再想想\"\n        icon=\"el-icon-info\"\n        icon-color=\"red\"\n        title=\"您确定批量删除这些数据吗？\"\n        @confirm=\"delBatch\"\n      >\n        <el-button type=\"danger\" slot=\"reference\">\n          批量删除\n          <i class=\"el-icon-remove-outline\"></i>\n        </el-button>\n      </el-popconfirm>\n      <el-upload\n        :action=\"'http://' + serverIp + ':9090/user/import'\"\n        :show-file-list=\"false\"\n        accept=\"xlsx\"\n        :on-success=\"handleExcelImportSuccess\"\n        style=\"display: inline-block\"\n      >\n        <el-button type=\"primary\" class=\"ml-5\">\n          导入\n          <i class=\"el-icon-bottom\"></i>\n        </el-button>\n      </el-upload>\n      <el-button type=\"primary\" @click=\"exp\" class=\"ml-5\">\n        导出\n        <i class=\"el-icon-top\"></i>\n      </el-button>\n    </div>\n\n    <el-table\n      :data=\"tableData\"\n      border\n      stripe\n      :header-cell-class-name=\"'headerBg'\"\n      @selection-change=\"handleSelectionChange\"\n    >\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n      <el-table-column prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\n      <el-table-column prop=\"username\" label=\"用户名\" width=\"140\"></el-table-column>\n      <el-table-column prop=\"role\" label=\"角色\">\n        <template slot-scope=\"scope\">\n          <el-tag type=\"primary\" v-if=\"scope.row.role === 'ROLE_ADMIN'\">管理员</el-tag>\n          <el-tag type=\"warning\" v-if=\"scope.row.role === 'ROLE_TEACHER'\">老师</el-tag>\n          <el-tag type=\"success\" v-if=\"scope.row.role === 'ROLE_STUDENT'\">学生</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"nickname\" label=\"昵称\" width=\"120\"></el-table-column>\n      <el-table-column prop=\"email\" label=\"邮箱\"></el-table-column>\n      <el-table-column prop=\"phone\" label=\"电话\"></el-table-column>\n      <el-table-column prop=\"address\" label=\"地址\"></el-table-column>\n      <el-table-column label=\"操作\" width=\"500\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"primary\"\n            @click=\"lookCourse(scope.row.courses)\"\n            v-if=\"scope.row.role === 'ROLE_TEACHER'\"\n          >\n            查看教授课程\n            <i class=\"el-icon-document\"></i>\n          </el-button>\n          <el-button\n            type=\"warning\"\n            @click=\"lookStuCourse(scope.row.stuCourses)\"\n            v-if=\"scope.row.role === 'ROLE_STUDENT'\"\n          >\n            查看已选课程\n            <i class=\"el-icon-document\"></i>\n          </el-button>\n          <el-button type=\"success\" @click=\"handleEdit(scope.row)\">\n            编辑\n            <i class=\"el-icon-edit\"></i>\n          </el-button>\n          <el-popconfirm\n            class=\"ml-5\"\n            confirm-button-text=\"确定\"\n            cancel-button-text=\"我再想想\"\n            icon=\"el-icon-info\"\n            icon-color=\"red\"\n            title=\"您确定删除吗？\"\n            @confirm=\"del(scope.row.id)\"\n          >\n            <el-button type=\"danger\" slot=\"reference\">\n              删除\n              <i class=\"el-icon-remove-outline\"></i>\n            </el-button>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div style=\"padding: 10px 0\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pageNum\"\n        :page-sizes=\"[2, 5, 10, 20]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n      ></el-pagination>\n    </div>\n\n    <el-dialog title=\"用户信息\" :visible.sync=\"dialogFormVisible\" width=\"30%\">\n      <el-form label-width=\"80px\" size=\"small\">\n        <el-form-item label=\"用户名\">\n          <el-input v-model=\"form.username\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"角色\">\n          <el-select clearable v-model=\"form.role\" placeholder=\"请选择角色\" style=\"width: 100%\">\n            <el-option\n              v-for=\"item in roles\"\n              :key=\"item.name\"\n              :label=\"item.name\"\n              :value=\"item.flag\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"昵称\">\n          <el-input v-model=\"form.nickname\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"邮箱\">\n          <el-input v-model=\"form.email\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"电话\">\n          <el-input v-model=\"form.phone\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"地址\">\n          <el-input v-model=\"form.address\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog title=\"课程信息\" :visible.sync=\"vis\" width=\"30%\">\n      <el-table :data=\"courses\" border stripe>\n        <el-table-column prop=\"name\" label=\"课程名称\"></el-table-column>\n        <el-table-column prop=\"score\" label=\"学分\"></el-table-column>\n      </el-table>\n    </el-dialog>\n\n    <el-dialog title=\"课程信息\" :visible.sync=\"stuVis\" width=\"30%\">\n      <el-table :data=\"stuCourses\" border stripe>\n        <el-table-column prop=\"name\" label=\"课程名称\"></el-table-column>\n        <el-table-column prop=\"score\" label=\"学分\"></el-table-column>\n      </el-table>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { serverIp } from '../../public/config';\n\nexport default {\n  name: 'User',\n  data() {\n    return {\n      serverIp: serverIp,\n      tableData: [],\n      total: 0,\n      pageNum: 1,\n      pageSize: 10,\n      username: '',\n      email: '',\n      address: '',\n      form: {},\n      dialogFormVisible: false,\n      multipleSelection: [],\n      roles: [],\n      courses: [],\n      vis: false,\n      stuCourses: [],\n      stuVis: false,\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    lookCourse(courses) {\n      this.courses = courses;\n      this.vis = true;\n    },\n    lookStuCourse(stuCourses) {\n      this.stuCourses = stuCourses;\n      this.stuVis = true;\n    },\n    load() {\n      this.request\n        .get('/user/page', {\n          params: {\n            pageNum: this.pageNum,\n            pageSize: this.pageSize,\n            username: this.username,\n            email: this.email,\n            address: this.address,\n          },\n        })\n        .then(res => {\n          this.tableData = res.data.records;\n          this.total = res.data.total;\n        });\n\n      this.request.get('/role').then(res => {\n        this.roles = res.data;\n      });\n    },\n    save() {\n      this.request.post('/user', this.form).then(res => {\n        if (res.code === '200') {\n          this.$message.success('保存成功');\n          this.dialogFormVisible = false;\n          this.load();\n        } else {\n          this.$message.error('保存失败');\n        }\n      });\n    },\n    handleAdd() {\n      this.dialogFormVisible = true;\n      this.form = {};\n    },\n    handleEdit(row) {\n      this.form = JSON.parse(JSON.stringify(row));\n      this.dialogFormVisible = true;\n    },\n    del(id) {\n      this.request.delete('/user/' + id).then(res => {\n        if (res.code === '200') {\n          this.$message.success('删除成功');\n          this.load();\n        } else {\n          this.$message.error('删除失败');\n        }\n      });\n    },\n    handleSelectionChange(val) {\n      console.log(val);\n      this.multipleSelection = val;\n    },\n    delBatch() {\n      let ids = this.multipleSelection.map(v => v.id); // [{}, {}, {}] => [1,2,3]\n      this.request.post('/user/del/batch', ids).then(res => {\n        if (res.code === '200') {\n          this.$message.success('批量删除成功');\n          this.load();\n        } else {\n          this.$message.error('批量删除失败');\n        }\n      });\n    },\n    reset() {\n      this.username = '';\n      this.email = '';\n      this.address = '';\n      this.load();\n    },\n    handleSizeChange(pageSize) {\n      console.log(pageSize);\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      console.log(pageNum);\n      this.pageNum = pageNum;\n      this.load();\n    },\n    exp() {\n      window.open(`http://${serverIp}:9090/user/export`);\n    },\n    handleExcelImportSuccess() {\n      this.$message.success('导入成功');\n      this.load();\n    },\n  },\n};\n</script>\n\n<style>\n.headerBg {\n  background: #eee !important;\n}\n</style>\n"]}]}